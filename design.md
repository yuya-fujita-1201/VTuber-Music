# VTuber Music Platform - Design Document

## アプリコンセプト
VTuberの楽曲（歌ってみた、オリジナル曲、歌枠など）に特化した音楽プラットフォーム。Spotify的なUIとVMAT的なコンセプトを組み合わせ、YouTube Musicのような音楽アプリとして使用できる設計。

## デザイン原則
- **モバイルファースト**: 縦向き（9:16）、片手操作を前提
- **iOS HIG準拠**: ネイティブiOSアプリのような操作感
- **音楽アプリUI**: Spotifyのような洗練されたダークテーマ

## 画面一覧

### 1. ホーム画面（Home）
**主要コンテンツ**:
- 最近追加された楽曲のカードグリッド
- おすすめプレイリスト
- 人気のVTuberセクション
- ジャンル別セクション（カバー曲、オリジナル曲、歌枠など）

**機能**:
- 各楽曲カードタップで再生画面へ遷移
- 横スクロール可能なセクション
- プルトゥリフレッシュで最新データ取得

### 2. 検索・フィルター画面（Search）
**主要コンテンツ**:
- 検索バー（VTuber名、楽曲名、タグで検索）
- フィルターチップ（ジャンル、カバー元曲、投稿日など）
- 検索結果のリスト表示
- 人気タグの表示

**機能**:
- リアルタイム検索
- 複数フィルター組み合わせ
- 同じカバー曲を歌っているVTuberをまとめて表示
- 検索履歴の保存

### 3. 楽曲詳細・再生画面（Player）
**主要コンテンツ**:
- 楽曲のサムネイル（大）
- 楽曲タイトル、VTuber名
- 再生コントロール（再生/一時停止、次へ、前へ）
- シークバー
- プレイリストに追加ボタン
- 関連楽曲リスト

**機能**:
- ミニプレーヤー（画面下部に常駐）
- バックグラウンド再生
- 自動再生（関連楽曲へ自動遷移）
- お気に入り登録

### 4. プレイリスト画面（Playlists）
**主要コンテンツ**:
- ユーザー作成プレイリスト一覧
- 各プレイリストのカバー画像
- プレイリスト内の楽曲数

**機能**:
- プレイリスト作成
- プレイリスト編集（楽曲追加/削除、並び替え）
- プレイリスト削除
- プレイリスト再生

### 5. ライブラリ画面（Library）
**主要コンテンツ**:
- お気に入り楽曲
- 最近再生した楽曲
- フォロー中のVTuber
- ダウンロード済み楽曲（将来実装）

**機能**:
- お気に入り管理
- 再生履歴表示
- VTuberフォロー機能

## 主要ユーザーフロー

### 楽曲検索から再生まで
1. ユーザーが検索画面を開く
2. VTuber名または楽曲名で検索
3. フィルター（ジャンル、タグ）を適用
4. 検索結果から楽曲をタップ
5. 再生画面で楽曲が再生開始
6. 関連楽曲が自動的に次の曲として再生

### プレイリスト作成フロー
1. ユーザーがプレイリスト画面を開く
2. 「新規プレイリスト作成」をタップ
3. プレイリスト名を入力
4. 楽曲検索またはライブラリから楽曲を追加
5. プレイリストが保存される
6. プレイリストを再生

### 同じカバー曲を探すフロー
1. ユーザーがカバー曲を再生中
2. 楽曲詳細画面で「同じ曲のカバー」ボタンをタップ
3. 同じ原曲をカバーしている他のVTuberの楽曲リストが表示
4. 別のバージョンをタップして再生

## カラー選択
**ダークテーマ（音楽アプリ風）**:
- **プライマリカラー**: `#1DB954` (Spotify風グリーン)
- **背景色**: `#121212` (ダークグレー)
- **カード背景**: `#282828` (ミディアムグレー)
- **テキスト**: `#FFFFFF` (ホワイト)
- **セカンダリテキスト**: `#B3B3B3` (ライトグレー)
- **アクセントカラー**: `#FF6B9D` (VTuber風ピンク)

## データ構造

### Song（楽曲）
- id: string
- title: string（楽曲タイトル）
- vtuber: string（VTuber名）
- thumbnailUrl: string（サムネイルURL）
- videoUrl: string（YouTube URL）
- duration: number（秒）
- genre: string（ジャンル: カバー、オリジナル、歌枠など）
- originalSong: string | null（カバー曲の場合、原曲名）
- tags: string[]（タグ配列）
- uploadDate: Date（アップロード日）
- viewCount: number（再生回数）

### Playlist（プレイリスト）
- id: string
- name: string（プレイリスト名）
- description: string（説明）
- coverImageUrl: string（カバー画像URL）
- songs: Song[]（楽曲配列）
- createdAt: Date
- updatedAt: Date

### VTuber
- id: string
- name: string（VTuber名）
- avatarUrl: string（アバターURL）
- channelUrl: string（YouTubeチャンネルURL）
- songCount: number（楽曲数）

## 技術スタック
- **フロントエンド**: React Native + Expo
- **UI**: NativeWind (Tailwind CSS)
- **状態管理**: React Context / Zustand
- **バックエンド**: Express.js + PostgreSQL
- **外部API**: YouTube Data API v3
- **音声再生**: expo-av

# VTuber Music Platform - TODO

## Phase 1: データベース設計とバックエンド基盤
- [x] データベーススキーマ設計（Song, Playlist, VTuber）
- [x] バックエンドAPI基盤構築
- [ ] YouTube Data API統合準備

## Phase 2: 検索・フィルター機能（最優先）
- [x] 楽曲検索API実装
- [x] フィルター機能実装（ジャンル、タグ、VTuber名）
- [x] 検索画面UI実装
- [x] フィルターチップコンポーネント実装
- [x] 検索結果リスト表示

## Phase 3: ホーム画面とナビゲーション
- [x] タブナビゲーション実装
- [x] ホーム画面レイアウト
- [x] 楽曲カードコンポーネント
- [x] セクション別表示（最近追加、人気、ジャンル別）

## Phase 4: 楽曲再生機能
- [ ] 楽曲再生画面UI
- [ ] ミニプレーヤーコンポーネント
- [ ] expo-avを使った音声再生実装
- [ ] 再生コントロール（再生/一時停止、次へ、前へ）
- [ ] シークバー実装
- [ ] バックグラウンド再生対応

## Phase 5: プレイリスト管理
- [x] プレイリスト一覧画面
- [x] プレイリスト作成機能
- [ ] プレイリスト編集機能（楽曲追加/削除）
- [ ] プレイリスト再生機能
- [x] プレイリストデータ永続化

## Phase 6: タグシステムと関連楽曲
- [ ] タグベース検索実装
- [ ] 同じカバー曲を探す機能
- [ ] 関連楽曲推薦アルゴリズム
- [ ] 自動再生機能（関連楽曲への自動遷移）

## Phase 7: ライブラリ機能
- [x] お気に入り楽曲管理
- [x] 再生履歴機能
- [ ] VTuberフォロー機能
- [x] ライブラリ画面UI

## Phase 8: アプリブランディング
- [x] アプリロゴ生成
- [x] アプリ名設定
- [x] スプラッシュスクリーン設定

## Phase 9: テストと最適化
- [ ] ユニットテスト作成
- [ ] パフォーマンス最適化
- [ ] エラーハンドリング改善

## Phase 10: ドキュメント作成
- [ ] README更新
- [ ] API仕様書作成
- [ ] ユーザーガイド作成

## 楽曲再生機能の実装（新規）
- [x] 楽曲詳細画面のルーティング設定
- [x] 楽曲詳細画面UI実装
- [x] ミニプレーヤーコンポーネント作成
- [x] 再生状態管理（Context/Store）
- [x] expo-avを使った音声再生実装
- [x] 再生コントロール（再生/一時停止、次へ、前へ）
- [x] シークバー実装
- [x] 関連楽曲表示機能
- [x] 各画面から楽曲詳細画面への遷移実装

## エラー修正とYouTube API統合（新規・緊急）
- [x] 音声再生エラーの修正（AVPlayerItem error -1001）
- [x] デモ音声URLを有効なものに変更
- [x] YouTube Data API統合の設計
- [x] YouTube APIキーの設定
- [x] YouTube動画検索機能の実装
- [x] YouTubeデータからSongデータへの変換
- [x] サムネイル画像の取得
- [x] 実際のYouTubeデータでシードスクリプトを更新

## エラー修正（新規・緊急）
- [x] FlatListの重複キーエラーを修正（"Encountered two children with the same key"）
- [x] 関連楽曲のkeyExtractorを修正
- [x] カバー曲セクションのデータ取得を実装
- [x] オリジナル曲セクションのデータ取得を実装
- [x] ホーム画面のカバー曲表示を修正
- [x] ホーム画面のオリジナル曲表示を修正- [x] 音声再生エラーを修正（error code -1100）
- [x] 実際のYouTube動画 URLから音声を再生できるようにする

## YouTube動画プレーヤー統合（新規）
- [x] expo-videoパッケージの確認とインストール
- [x] YouTubeプレーヤーコンポーネントの作成
- [x] YouTube動画IDの抽出ロジック実装
- [x] 楽曲詳細画面へのプレーヤー統合
- [x] プレーヤーコントロール（再生/一時停止、フルスクリーン）実装
- [x] 動画再生状態の管理
- [x] エラーハンドリング実装
- [x] テスト作成と実行

## 検索・ライブラリ画面からの楽曲遷移（新規）
- [x] 検索画面の楽曲カードにonPress追加
- [x] 検索画面から楽曲詳細画面への遷移実装
- [x] ライブラリ画面のお気に入り楽曲カードにonPress追加
- [x] ライブラリ画面の再生履歴カードにonPress追加
- [x] ライブラリ画面から楽曲詳細画面への遷移実装
- [x] テスト実行
